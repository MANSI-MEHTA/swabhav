package com.techlabs.action;

import java.util.ArrayList;
import java.util.List;

import javax.servlet.http.HttpSession;

import org.apache.struts2.ServletActionContext;
import org.springframework.web.context.WebApplicationContext;
import org.springframework.web.context.support.WebApplicationContextUtils;

import com.opensymphony.xwork2.ActionSupport;
import com.techlabs.entity.User;
import com.techlabs.service.UserService;

public class AdminAction extends ActionSupport {
	WebApplicationContext context = WebApplicationContextUtils
			.getRequiredWebApplicationContext(ServletActionContext
					.getServletContext());

	private UserService userservice = (UserService) context
			.getBean("userservice");
	HttpSession session;

	private List<User> listofusers = new ArrayList<User>();

	@Override
	public String execute() {

		session = ServletActionContext.getRequest().getSession();

		long acc_no = (long) session.getAttribute("acc_no");
		System.out.println();

		listofusers = userservice.getAllUsers();
		System.out.println("list of users in Admin Action" + listofusers);
		for(User user:listofusers){
			System.out.println(user.getUser_id());
		}
		return "success";
	}

	public List<User> getListofusers() {
		return listofusers;
	}

	public void setListofusers(List<User> listofusers) {
		this.listofusers = listofusers;
	}

}
